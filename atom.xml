<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å­¦åˆ°çš„è¶Šå¤šï¼Œè¶Šæ˜¯èƒ½å‘ç°è‡ªå·±æœ‰å¤šä¹ˆæ¸ºå°ã€‚</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.yefangqingchen.com/"/>
  <updated>2017-03-30T08:28:52.000Z</updated>
  <id>http://www.yefangqingchen.com/</id>
  
  <author>
    <name>yefangqingchen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Macå®‰è£…React Native for Android ç¯å¢ƒ</title>
    <link href="http://www.yefangqingchen.com/2017/03/30/Mac%E5%AE%89%E8%A3%85React_Native_for_Android%20%E7%8E%AF%E5%A2%83/"/>
    <id>http://www.yefangqingchen.com/2017/03/30/Macå®‰è£…React_Native_for_Android ç¯å¢ƒ/</id>
    <published>2017-03-30T08:27:21.000Z</published>
    <updated>2017-03-30T08:28:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºMacå®‰è£…React Nativeç¯å¢ƒæ¥è¯´å¾ˆç®€å•ï¼Œç½‘ä¸Šçš„æ–‡ç« å†™çš„æœ‰ç‚¹éº»çƒ¦ï¼Œæœ‰äº›ä¸œè¥¿éƒ½ä¸çŸ¥é“æ˜¯å¹²ä»€ä¹ˆçš„ã€‚è‡ªå·±è®°å½•ä¸€ä¸‹å®‰è£…è¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…-Homebrew"><a href="#å®‰è£…-Homebrew" class="headerlink" title="å®‰è£… Homebrew"></a>å®‰è£… Homebrew</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /usr/bin/ruby -e <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></div></pre></td></tr></table></figure>
<h2 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h2><pre><code class="java">$ brew install node

<span class="comment">//å®‰è£…å®Œnodeåå»ºè®®è®¾ç½®npmé•œåƒä»¥åŠ é€Ÿåé¢çš„è¿‡ç¨‹ï¼ˆæˆ–ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰</span>

npm config set registry https:<span class="comment">//registry.npm.taobao.org --global</span>
npm config set disturl https:<span class="comment">//npm.taobao.org/dist --global</span>
</code></pre>
<h2 id="å®‰è£…watchman"><a href="#å®‰è£…watchman" class="headerlink" title="å®‰è£…watchman"></a>å®‰è£…watchman</h2><pre><code class="java">$ brew install watchman

//å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
You must `brew link pcre&#39; before watchman can be installed

//æ ¹æ®æç¤ºæ‰§è¡Œ
$ brew link pcre

//å¦‚æœæœ‰ä¸€ä¸‹é”™è¯¯ï¼šï¼ˆæ˜¯å› ä¸ºæ²¡æœ‰æƒé™ï¼‰
Linking /usr/local/Cellar/pcre/8.40... 
Error: Could not symlink lib/pkgconfig/libpcre.pc
/usr/local/lib/pkgconfig is not writable.

//ç»§ç»­æ‰§è¡Œï¼š(username æ›¿æ¢æˆä½ çš„macç”¨æˆ·å)
$ sudo chown username /usr/local/lib/pkgconfig

//ç„¶ååœ¨æ‰§è¡Œï¼Œå°±å®‰è£…æˆåŠŸäº†
$ brew install watchman
</code></pre>
<h2 id="å®‰è£…React-Native"><a href="#å®‰è£…React-Native" class="headerlink" title="å®‰è£…React Native"></a>å®‰è£…React Native</h2><pre><code class="java">$ npm install -g react-<span class="keyword">native</span>-cli
</code></pre>
<h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h2><pre><code class="java"><span class="comment">//å‰æå·²ç»è£…å¥½äº†android studioã€‚</span>

$ open ~/.bash_profile

<span class="comment">//åŠ å…¥åˆ°.bash_profileæ–‡ä»¶ä¸­</span>
export ANDROID_HOME=/Users/Rock/Library/Android/sdk/
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools

$ source ~/.bash_profile
</code></pre>
<h2 id="åˆ›å»ºReact-Nativeé¡¹ç›®"><a href="#åˆ›å»ºReact-Nativeé¡¹ç›®" class="headerlink" title="åˆ›å»ºReact Nativeé¡¹ç›®"></a>åˆ›å»ºReact Nativeé¡¹ç›®</h2><pre><code class="java"><span class="comment">//åœ¨ä½ çš„å·¥ä½œç©ºé—´ä¸‹æ‰§è¡Œï¼Œç›®å½•éšæ„æ¯”å¦‚æˆ‘çš„æ˜¯ï¼ˆworkspace/react_nativeï¼‰</span>

react-<span class="keyword">native</span> init ReactNativeDemo

ç¬¬ä¸€æ¬¡ç¨ç­‰ç‰‡åˆ»å°±ä¼šå‡ºç°ä»¥ä¸‹ç»“æœï¼š
</code></pre>
<h3 id="æ‰§è¡Œreact-native-init-ReactNativeDemo-ç»“æœ"><a href="#æ‰§è¡Œreact-native-init-ReactNativeDemo-ç»“æœ" class="headerlink" title="æ‰§è¡Œreact-native init ReactNativeDemo ç»“æœ"></a>æ‰§è¡Œreact-native init ReactNativeDemo ç»“æœ</h3><pre><code class="java">Rock:react_native Rock$ react-<span class="keyword">native</span> init ReactNativeDemo
This will walk you through creating a <span class="keyword">new</span> React Native project in /Users/Rock/workspace/react_native/ReactNativeDemo
Using yarn v0.21.3
Installing react-<span class="keyword">native</span>...
yarn add v0.21.3
info No lockfile found.
[<span class="number">1</span>/<span class="number">4</span>] ğŸ”  Resolving packages...
warning react-<span class="keyword">native</span> &gt; xcode &gt; node-uuid@<span class="number">1.4</span>.7: Use uuid <span class="keyword">module</span> instead
[<span class="number">2</span>/<span class="number">4</span>] ğŸšš  Fetching packages...
[<span class="number">3</span>/<span class="number">4</span>] ğŸ”—  Linking dependencies...
warning <span class="string">"react-native@0.42.3"</span> has unmet peer dependency <span class="string">"react@~15.4.1"</span>.
[<span class="number">4</span>/<span class="number">4</span>] ğŸ“ƒ  Building fresh packages...
success Saved lockfile.
success Saved <span class="number">430</span> <span class="keyword">new</span> dependencies.

================================================================
                     ä¸­é—´çœç•¥Nè¡Œã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
================================================================

âœ¨  Done in <span class="number">12.53</span>s.
To run your app on iOS:
   cd /Users/Rock/workspace/react_native/ReactNativeDemo
   react-<span class="keyword">native</span> run-ios
   - or -
   Open ios/ReactNativeDemo.xcodeproj in Xcode
   Hit the Run button
To run your app on Android:
   cd /Users/Rock/workspace/react_native/<span class="function">ReactNativeDemo
   Have an Android emulator <span class="title">running</span> <span class="params">(quickest way to get started)</span>, or a device connected
   react-<span class="keyword">native</span> run-android
Rock:react_native Rock$</span>
</code></pre>
<h3 id="è¿›å…¥ReactNativeDemoç›®å½•"><a href="#è¿›å…¥ReactNativeDemoç›®å½•" class="headerlink" title="è¿›å…¥ReactNativeDemoç›®å½•"></a>è¿›å…¥ReactNativeDemoç›®å½•</h3><pre><code class="java">===================================
æ³¨æ„çœ‹ä¸€ä¸‹ç»“æœç¬¬äºŒè¡Œï¼Œç„¶åè¿›å…¥åˆ°æ­¤ç›®å½•

This will walk you through creating a <span class="keyword">new</span> React Native project in /Users/Rock/workspace/react_native/ReactNativeDemo

===================================
<span class="comment">//æ‰§è¡Œä¸€ä¸‹å‘½ä»¤</span>
$ cd ReactNativeDemo
$ ls -la
===================================

<span class="comment">//ç»“æœ</span>
Rock:react_native Rock$ cd ReactNativeDemo
Rock:ReactNativeDemo Rock$ ls -la
total <span class="number">360</span>
drwxr-xr-x   <span class="number">17</span> Rock  staff     <span class="number">578</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .
drwxr-xr-x    <span class="number">4</span> Rock  staff     <span class="number">136</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">53</span> ..
-rw-r--r--    <span class="number">1</span> Rock  staff      <span class="number">31</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .babelrc
-rw-r--r--    <span class="number">1</span> Rock  staff     <span class="number">114</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .buckconfig
-rw-r--r--    <span class="number">1</span> Rock  staff    <span class="number">1371</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .flowconfig
-rw-r--r--    <span class="number">1</span> Rock  staff      <span class="number">16</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .gitattributes
-rw-r--r--    <span class="number">1</span> Rock  staff     <span class="number">774</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .gitignore
-rw-r--r--    <span class="number">1</span> Rock  staff       <span class="number">2</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> .watchmanconfig
drwxr-xr-x    <span class="number">4</span> Rock  staff     <span class="number">136</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> __tests__
drwxr-xr-x   <span class="number">10</span> Rock  staff     <span class="number">340</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> android
-rw-r--r--    <span class="number">1</span> Rock  staff      <span class="number">67</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> app.json
-rw-r--r--    <span class="number">1</span> Rock  staff    <span class="number">1121</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> index.android.js
-rw-r--r--    <span class="number">1</span> Rock  staff    <span class="number">1087</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> index.ios.js
drwxr-xr-x    <span class="number">7</span> Rock  staff     <span class="number">238</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> ios
drwxr-xr-x  <span class="number">554</span> Rock  staff   <span class="number">18836</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> node_modules
-rw-r--r--    <span class="number">1</span> Rock  staff     <span class="number">433</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> <span class="keyword">package</span>.json
-rw-r--r--    <span class="number">1</span> Rock  staff  <span class="number">142776</span>  <span class="number">3</span> <span class="number">30</span> <span class="number">13</span>:<span class="number">54</span> yarn.lock
Rock:ReactNativeDemo Rock$
</code></pre>
<h3 id="ReactNativeDemoç›®å½•ä¸‹æ–‡ä»¶è¯´æ˜"><a href="#ReactNativeDemoç›®å½•ä¸‹æ–‡ä»¶è¯´æ˜" class="headerlink" title="ReactNativeDemoç›®å½•ä¸‹æ–‡ä»¶è¯´æ˜"></a>ReactNativeDemoç›®å½•ä¸‹æ–‡ä»¶è¯´æ˜</h3><blockquote>
<ol>
<li>React Nativeä½¿ç”¨npmç®¡ç†packageï¼Œå› æ­¤æœ‰node_modulesç›®å½•ã€‚</li>
<li>android å’Œiosç›®å½•åŒ…å«äº†å…¸å‹çš„Android/iOS é¡¹ç›®ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨Android Studio/Xcodeæ‰“å¼€æˆ–è€…è¿è¡Œã€‚</li>
<li>index.android.js å’Œ index.ios.js æ–‡ä»¶åŒ…å«äº†React Nativeæºç çš„ä¸»å…¥å£ã€‚</li>
</ol>
</blockquote>
<h3 id="è¿è¡Œ-ReactNativeDemo"><a href="#è¿è¡Œ-ReactNativeDemo" class="headerlink" title="è¿è¡Œ ReactNativeDemo"></a>è¿è¡Œ ReactNativeDemo</h3><pre><code class="java">
$ react-<span class="keyword">native</span> run-android

æ³¨æ„ï¼š
    <span class="number">1</span>ã€react-<span class="keyword">native</span> run-androidä¸€å®šè¦åœ¨ReactNativeDemoç›®å½•ä¸‹
    <span class="number">2</span>ã€è¦æå‰æ‰“å¼€æ¨¡æ‹Ÿå™¨
</code></pre>
<p><img src="http://omsqy2wls.bkt.clouddn.com/2017-03-30%2015.36.54.gif" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹äºMacå®‰è£…React Nativeç¯å¢ƒæ¥è¯´å¾ˆç®€å•ï¼Œç½‘ä¸Šçš„æ–‡ç« å†™çš„æœ‰ç‚¹éº»çƒ¦ï¼Œæœ‰äº›ä¸œè¥¿éƒ½ä¸çŸ¥é“æ˜¯å¹²ä»€ä¹ˆçš„ã€‚è‡ªå·±è®°å½•ä¸€ä¸‹å®‰è£…è¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.yefangqingchen.com/categories/Android/"/>
    
      <category term="React Native" scheme="http://www.yefangqingchen.com/categories/Android/React-Native/"/>
    
    
      <category term="Android" scheme="http://www.yefangqingchen.com/tags/Android/"/>
    
      <category term="React Native" scheme="http://www.yefangqingchen.com/tags/React-Native/"/>
    
  </entry>
  
  <entry>
    <title>Android æ­£å¸¸æƒé™å’Œå±é™©æƒé™</title>
    <link href="http://www.yefangqingchen.com/2017/03/29/Android%E6%AD%A3%E5%B8%B8%E6%9D%83%E9%99%90%E5%92%8C%E5%8D%B1%E9%99%A9%E6%9D%83%E9%99%90/"/>
    <id>http://www.yefangqingchen.com/2017/03/29/Androidæ­£å¸¸æƒé™å’Œå±é™©æƒé™/</id>
    <published>2017-03-29T05:31:33.000Z</published>
    <updated>2017-03-29T08:01:34.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Android 6.0ï¼ˆAPI çº§åˆ« 23ï¼‰æƒé™è¶Šæ¥è¶Šè§„èŒƒï¼Œä¸åƒä»¥å¾€é‚£æ ·ç›´æ¥åœ¨AndroidManifest.xml ä¸­ä½¿ç”¨ uses-permission æ ‡ç­¾æ˜¯å£°æ˜ä½ æ‰€è¦çš„æƒé™å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ç°åœ¨çš„æƒé™åˆ†ä¸º æ­£å¸¸æƒé™åˆå±é™©æƒé™ã€ä»¥åŠç‰¹æ®Šæƒé™ã€‚ </p>
</blockquote>
<ol>
<li><p>æ­£å¸¸æƒé™ :æ­£å¸¸æƒé™æ¶µç›–åº”ç”¨éœ€è¦è®¿é—®å…¶æ²™ç›’å¤–éƒ¨æ•°æ®æˆ–èµ„æºï¼Œä½†å¯¹ç”¨æˆ·éšç§æˆ–å…¶ä»–åº”ç”¨æ“ä½œé£é™©å¾ˆå°çš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æ—¶åŒºçš„æƒé™å°±æ˜¯æ­£å¸¸æƒé™ã€‚å¦‚æœåº”ç”¨å£°æ˜å…¶éœ€è¦æ­£å¸¸æƒé™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘åº”ç”¨æˆäºˆè¯¥æƒé™ã€‚å¦‚éœ€å½“å‰æ­£å¸¸æƒé™çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…æ­£å¸¸æƒé™ã€‚</p>
</li>
<li><p>å±é™©æƒé™ : æ¶µç›–åº”ç”¨éœ€è¦æ¶‰åŠç”¨æˆ·éšç§ä¿¡æ¯çš„æ•°æ®æˆ–èµ„æºï¼Œæˆ–è€…å¯èƒ½å¯¹ç”¨æˆ·å­˜å‚¨çš„æ•°æ®æˆ–å…¶ä»–åº”ç”¨çš„æ“ä½œäº§ç”Ÿå½±å“çš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œèƒ½å¤Ÿè¯»å–ç”¨æˆ·çš„è”ç³»äººå±äºå±é™©æƒé™ã€‚å¦‚æœåº”ç”¨å£°æ˜å…¶éœ€è¦å±é™©æƒé™ï¼Œåˆ™ç”¨æˆ·å¿…é¡»æ˜ç¡®å‘åº”ç”¨æˆäºˆè¯¥æƒé™</p>
</li>
<li><p>ç‰¹æ®Šæƒé™ : ä¸€äº›ç‰¹åˆ«æ•æ„Ÿçš„æƒé™,ä¾‹å¦‚è®¾ç½®æ‚¬æµ®çª—</p>
<a id="more"></a>
</li>
</ol>
<h2 id="æ­£å¸¸æƒé™"><a href="#æ­£å¸¸æƒé™" class="headerlink" title="æ­£å¸¸æƒé™"></a>æ­£å¸¸æƒé™</h2><table>
<thead>
<tr>
<th>æƒé™</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACCESS_LOCATION_EXTRA_COMMANDS</td>
<td>å…è®¸ç¨‹åºè®¿é—®é¢å¤–çš„å®šä½æä¾›è€…æŒ‡ä»¤</td>
</tr>
<tr>
<td>ACCESS_NETWORK_STATE</td>
<td>è·å–ç½‘ç»œä¿¡æ¯çŠ¶æ€ï¼Œå¦‚å½“å‰çš„ç½‘ç»œè¿æ¥æ˜¯å¦æœ‰æ•ˆ</td>
</tr>
<tr>
<td>ACCESS_NOTIFICATION_POLICY</td>
<td>è®¿é—®é€šçŸ¥æ”¿ç­–çš„åº”ç”¨ç¨‹åºçš„æ ‡è®°æƒé™</td>
</tr>
<tr>
<td>ACCESS_WIFI_STATE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¿é—®Wi-Fiç½‘ç»œçŠ¶æ€ä¿¡æ¯</td>
</tr>
<tr>
<td>BLUETOOTH</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¿æ¥é…å¯¹è¿‡çš„è“ç‰™è®¾å¤‡</td>
</tr>
<tr>
<td>BLUETOOTH_ADMIN</td>
<td>å…è®¸åº”ç”¨ç¨‹åºç®¡ç†è“ç‰™,æœç´¢å’Œé…å¯¹æ–°çš„è“ç‰™è®¾å¤‡</td>
</tr>
<tr>
<td>BROADCAST_STICKY</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ”¶åˆ°å¹¿æ’­åå¿«é€Ÿæ”¶åˆ°ä¸‹ä¸€ä¸ªå¹¿æ’­</td>
</tr>
<tr>
<td>CHANGE_NETWORK_STATE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ”¹å˜ç½‘ç»œè¿æ¥çŠ¶æ€</td>
</tr>
<tr>
<td>CHANGE_WIFI_MULTICAST_STATE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¾ç½®WiFiè¿æ¥å¤šæ¨¡å¼</td>
</tr>
<tr>
<td>CHANGE_WIFI_STATE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ”¹å˜Wi-Fiè¿æ¥çŠ¶æ€</td>
</tr>
<tr>
<td>DISABLE_KEYGUARD</td>
<td>å…è®¸åº”ç”¨ç¨‹åºç¦ç”¨é”®ç›˜é”</td>
</tr>
<tr>
<td>EXPAND_STATUS_BAR</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ‰©å±•æˆ–æ”¶ç¼©çŠ¶æ€æ </td>
</tr>
<tr>
<td>GET_PACKAGE_SIZE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè·å–åº”ç”¨çš„æ–‡ä»¶å¤§å°</td>
</tr>
<tr>
<td>INSTALL_SHORTCUT</td>
<td>å…è®¸åº”ç”¨ç¨‹åºåœ¨Launcherä¸­å®‰è£…å¿«æ·æ–¹å¼</td>
</tr>
<tr>
<td>INTERNET</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¿é—®ç½‘ç»œè¿æ¥</td>
</tr>
<tr>
<td>KILL_BACKGROUND_PROCESSES</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè°ƒç”¨killBackgroundProcesses(String)æ–¹æ³•ç»“æŸåå°è¿›ç¨‹</td>
</tr>
<tr>
<td>MODIFY_AUDIO_SETTINGS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºä¿®æ”¹å…¨å±€éŸ³é¢‘è®¾ç½®</td>
</tr>
<tr>
<td>NFC</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ‰§è¡ŒNFCè¿‘è·ç¦»é€šè®¯æ“ä½œ</td>
</tr>
<tr>
<td>READ_SYNC_SETTINGS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–åŒæ­¥è®¾ç½®ï¼Œè¯»å–Googleåœ¨çº¿åŒæ­¥è®¾ç½®</td>
</tr>
<tr>
<td>READ_SYNC_STATS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–åŒæ­¥çŠ¶æ€ï¼Œè¯»å–Googleåœ¨çº¿åŒæ­¥è®¾ç½®</td>
</tr>
<tr>
<td>RECEIVE_BOOT_COMPLETED</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå¼€æœºè‡ªåŠ¨è¿è¡Œ</td>
</tr>
<tr>
<td>REORDER_TASKS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ”¹å˜Zè½´æ’åˆ—ä»»åŠ¡</td>
</tr>
<tr>
<td>REQUEST_IGNORE_BATTERY_OPTIMIZATIONS</td>
<td>ä¸ºäº†ä½¿ç”¨ACTION_REQUEST_IGNORE_BATTERY_OPTIMIZATIONSï¼Œå¿…é¡»ä¿ç•™åº”ç”¨ç¨‹åºçš„æƒé™ã€‚</td>
</tr>
<tr>
<td>REQUEST_INSTALL_PACKAGES</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯·æ±‚å®‰è£…è½¯ä»¶åŒ…</td>
</tr>
<tr>
<td>SET_ALARM</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¾ç½®é—¹é“ƒæé†’</td>
</tr>
<tr>
<td>SET_TIME_ZONE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¾ç½®ç³»ç»Ÿæ—¶åŒº</td>
</tr>
<tr>
<td>SET_WALLPAPER</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¾ç½®æ¡Œé¢å£çº¸</td>
</tr>
<tr>
<td>SET_WALLPAPER_HINTS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¾ç½®å£çº¸å»ºè®®</td>
</tr>
<tr>
<td>TRANSMIT_IR</td>
<td>å…è®¸ä½¿ç”¨è®¾å¤‡çš„çº¢å¤–å‘å°„å™¨ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</td>
</tr>
<tr>
<td>UNINSTALL_SHORTCUT</td>
<td>ç³»ç»Ÿå·²ä¸å†æ”¯æŒæ­¤æƒé™</td>
</tr>
<tr>
<td>USE_FINGERPRINT</td>
<td>å…è®¸åº”ç”¨ä½¿ç”¨æŒ‡çº¹ç¡¬ä»¶</td>
</tr>
<tr>
<td>VIBRATE</td>
<td>å…è®¸è®¿é—®æŒ¯åŠ¨è®¾å¤‡</td>
</tr>
<tr>
<td>WAKE_LOCK</td>
<td>å…è®¸åº”ç”¨ç¨‹åºåœ¨æ‰‹æœºé”å±åè¿›ç¨‹ä»ç„¶è¿è¡Œ</td>
</tr>
<tr>
<td>WRITE_SYNC_SETTINGS</td>
<td>å…è®¸ç¨‹åºGoogleåœ¨çº¿åŒæ­¥è®¾ç½®</td>
</tr>
</tbody>
</table>
<h3 id="æ­£å¸¸æƒé™ä½¿ç”¨æ–¹æ³•"><a href="#æ­£å¸¸æƒé™ä½¿ç”¨æ–¹æ³•" class="headerlink" title="æ­£å¸¸æƒé™ä½¿ç”¨æ–¹æ³•"></a>æ­£å¸¸æƒé™ä½¿ç”¨æ–¹æ³•</h3><blockquote>
<p>AndroidManifest.xml ä¸­ ä½¿ç”¨ uses-permission æ ‡ç­¾å£°æ˜</p>
</blockquote>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
</code></pre><hr>
<h2 id="å±é™©æƒé™"><a href="#å±é™©æƒé™" class="headerlink" title="å±é™©æƒé™"></a>å±é™©æƒé™</h2><hr>
<table>
<thead>
<tr>
<th>CALENDAR</th>
<th>æ—¥å†ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_CALENDAR</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–ç”¨æˆ·æ—¥å†æ•°æ®</td>
</tr>
<tr>
<td>WRITE_CALENDAR</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå†™å…¥ç”¨æˆ·æ—¥ç¨‹ï¼Œä½†ä¸å¯è¯»å–</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>CAMERA</th>
<th>ç›¸æœºç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_CALENDAR</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¿é—®æ‘„åƒå¤´</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>CONTACTS</th>
<th>è”ç³»äººç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_CONTACTS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–è”ç³»äººé€šè®¯å½•ä¿¡æ¯</td>
</tr>
<tr>
<td>WRITE_CONTACTS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå†™å…¥è”ç³»äººï¼Œä½†ä¸å¯è¯»å–</td>
</tr>
<tr>
<td>GET_ACCOUNTS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¿é—®GMailè´¦æˆ·åˆ—è¡¨</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>LOCATION</th>
<th>å®šä½ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACCESS_FINE_LOCATION</td>
<td>å…è®¸åº”ç”¨ç¨‹åºé€šè¿‡GPSè·å–ç²¾ç¡®çš„ä½ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td>ACCESS_COARSE_LOCATION</td>
<td>å…è®¸åº”ç”¨ç¨‹åºé€šè¿‡WiFiæˆ–ç§»åŠ¨åŸºç«™è·å–ç²—ç•¥çš„ä½ç½®ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>MICROPHONE</th>
<th>éº¦å…‹é£ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>RECORD_AUDIO</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå½•åˆ¶éŸ³é¢‘</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>PHONE</th>
<th>ç”µè¯ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_PHONE_STATE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–ç”µè¯çŠ¶æ€</td>
</tr>
<tr>
<td>CALL_PHONE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ‹¨æ‰“ç”µè¯,ä»éç³»ç»Ÿæ‹¨å·å™¨é‡Œåˆå§‹åŒ–ä¸€ä¸ªç”µè¯æ‹¨å·</td>
</tr>
<tr>
<td>READ_CALL_LOG</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–é€šè¯è®°å½•</td>
</tr>
<tr>
<td>WRITE_CALL_LOG</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå†™å…¥é€šè¯è®°å½•</td>
</tr>
<tr>
<td>ADD_VOICEMAIL</td>
<td>å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨è¯­éŸ³é‚®ä»¶</td>
</tr>
<tr>
<td>USE_SIP</td>
<td>å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨SIPè§†é¢‘æœåŠ¡</td>
</tr>
<tr>
<td>PROCESS_OUTGOING_CALLS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºç›‘è§†ã€ä¿®æ”¹å¤–æ‹¨ç”µè¯</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>SENSORS</th>
<th>ä¼ æ„Ÿå™¨ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>BODY_SENSORS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè®¿é—®ç”¨æˆ·ç”¨æ¥è¡¡é‡èº«ä½“å†…å‘ç”Ÿçš„æƒ…å†µçš„ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œä¾‹å¦‚å¿ƒç‡</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>SMS</th>
<th>çŸ­ä¿¡ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>SEND_SMS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå‘é€çŸ­ä¿¡</td>
</tr>
<tr>
<td>RECEIVE_SMS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ¥æ”¶çŸ­ä¿¡</td>
</tr>
<tr>
<td>READ_SMS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–çŸ­ä¿¡å†…å®¹</td>
</tr>
<tr>
<td>RECEIVE_WAP_PUSH</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ¥æ”¶WAP PUSHä¿¡æ¯</td>
</tr>
<tr>
<td>RECEIVE_MMS</td>
<td>å…è®¸åº”ç”¨ç¨‹åºæ¥æ”¶å½©ä¿¡</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>STORAGE</th>
<th>å­˜å‚¨ç›¸å…³æƒé™</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_EXTERNAL_STORAGE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºè¯»å–æ‰©å±•å­˜å‚¨å™¨</td>
</tr>
<tr>
<td>WRITE_EXTERNAL_STORAGE</td>
<td>å…è®¸åº”ç”¨ç¨‹åºå†™å…¥å¤–éƒ¨å­˜å‚¨ï¼Œå¦‚SDå¡ä¸Šå†™æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="å±é™©æƒé™ä½¿ç”¨æ–¹æ³•"><a href="#å±é™©æƒé™ä½¿ç”¨æ–¹æ³•" class="headerlink" title="å±é™©æƒé™ä½¿ç”¨æ–¹æ³•"></a>å±é™©æƒé™ä½¿ç”¨æ–¹æ³•</h3><pre><code>æ¯”å¦‚ç°åœ¨é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªä¸Šä¼ ç›¸ç‰‡çš„åŠŸèƒ½ï¼Œå¦‚æœä½ çš„ï¼ˆAPI çº§åˆ«æ˜¯ 23ï¼‰ï¼Œé‚£ä¹ˆç›´æ¥åœ¨AndroidManifest.xml ä¸­ä½¿ç”¨ uses-permissionå£°æ˜READ_EXTERNAL_STORAGEæƒé™æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä¼šæŠ¥é”™ï¼š

java.lang.SecurityException: Permission Denial: reading com.android.providers.media.MediaProvider uri content://media/external/images/media from pid=5244, uid=10144 requires android.permission.READ_EXTERNAL_STORAGE, or grantUriPermission()

æ‰€ä»¥è¦åŠ¨æ€è¯·æ±‚æ­¤æƒé™
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> READ_EXTERNAL_STORAGE = <span class="number">0x01</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CAMERA = <span class="number">0x02</span>;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * é’ˆå¯¹6.0åŠ¨æ€è¯·æ±‚æƒé™é—®é¢˜</div><div class="line">     * åˆ¤æ–­æ˜¯å¦å…è®¸æ­¤æƒé™</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> permissions</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="meta">@TargetApi</span>(Build.VERSION_CODES.M)</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">hasPermission</span><span class="params">(String... permissions)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (String permission : permissions) &#123;</div><div class="line">            <span class="keyword">if</span> (ContextCompat.checkSelfPermission(<span class="keyword">this</span>, permission) != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                <span class="keyword">if</span>(shouldShowRequestPermissionRationale(permission))&#123;</div><div class="line">                    showToast(<span class="string">"è¯·å…è®¸æ¬¡æƒé™"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * åŠ¨æ€è¯·æ±‚æƒé™</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> code</div><div class="line">     * <span class="doctag">@param</span> permissions</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">requestPermission</span><span class="params">(<span class="keyword">int</span> code, String... permissions)</span> </span>&#123;</div><div class="line">        ActivityCompat.requestPermissions(<span class="keyword">this</span>, permissions, code);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å¤„ç†æƒé™è¯·æ±‚å“åº”</div><div class="line">     * <span class="doctag">@param</span> requestCode</div><div class="line">     * <span class="doctag">@param</span> permissions</div><div class="line">     * <span class="doctag">@param</span> grantResults</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">            <span class="keyword">case</span> READ_EXTERNAL_STORAGE:</div><div class="line">                <span class="keyword">if</span> (grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                    readLocalMedia();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    showToast(<span class="string">"è¯»å–å†…å­˜å¡æƒé™å·²è¢«æ‹’ç»"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> CAMERA:</div><div class="line">                <span class="keyword">if</span> (grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line">                    startCamera();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    showToast(<span class="string">"æ‹ç…§æƒé™å·²è¢«æ‹’ç»"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * è¯»å–ç›¸å†Œä¿¡æ¯</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">readLocalMedia</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å¯åŠ¨ç›¸æœº</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">startCamera</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">showToast</span><span class="params">(String msg)</span> </span>&#123;</div><div class="line">        Toast.makeText(BaseActivity.<span class="keyword">this</span>, msg, Toast.LENGTH_LONG).show();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>è°ƒç”¨ä»¥ä¸Šä»£ç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// ç¬¬ä¸€æ¬¡è·å–è¿‡ç›¸å†Œåˆ—è¡¨</span></div><div class="line"><span class="comment">// å…ˆåˆ¤æ–­æ‰‹æœºæ˜¯å¦æœ‰è¯»å–æƒé™ï¼Œä¸»è¦æ˜¯é’ˆå¯¹6.0å·²ä¸Šç³»ç»Ÿ</span></div><div class="line"><span class="keyword">if</span> (hasPermission(Manifest.permission.READ_EXTERNAL_STORAGE)) &#123;</div><div class="line">       readLocalMedia();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        requestPermission(READ_EXTERNAL_STORAGE, Manifest.permission.READ_EXTERNAL_STORAGE);</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„:å³ä½¿æ”¯æŒäº†è¿è¡Œæ—¶æƒé™ï¼Œä¹Ÿè¦åœ¨Manifestå£°æ˜ï¼Œå› ä¸ºå¸‚åœºåº”ç”¨ä¼šæ ¹æ®è¿™ä¸ªä¿¡æ¯å’Œç¡¬ä»¶è®¾å¤‡è¿›è¡ŒåŒ¹é…ï¼Œå†³å®šä½ çš„åº”ç”¨æ˜¯å¦åœ¨è¯¥è®¾å¤‡ä¸Šæ˜¾ç¤ºã€‚</strong></p>
</blockquote>
<h2 id="ç‰¹æ®Šæƒé™"><a href="#ç‰¹æ®Šæƒé™" class="headerlink" title="ç‰¹æ®Šæƒé™"></a>ç‰¹æ®Šæƒé™</h2><table>
<thead>
<tr>
<th>æƒé™</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>SYSTEM_ALERT_WINDOW</td>
<td>è®¾ç½®æ‚¬æµ®çª—</td>
</tr>
<tr>
<td>WRITE_SETTINGS</td>
<td>ä¿®æ”¹ç³»ç»Ÿè®¾ç½®</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ç‰¹æ®Šæƒé™çš„æˆæƒï¼Œåšæ³•æ˜¯ä½¿ç”¨startActivityForResultå¯åŠ¨æˆæƒç•Œé¢æ¥å®Œæˆã€‚</p>
</blockquote>
<h3 id="è·å–-SYSTEM-ALERT-WINDOW-æƒé™"><a href="#è·å–-SYSTEM-ALERT-WINDOW-æƒé™" class="headerlink" title="è·å– SYSTEM_ALERT_WINDOW æƒé™"></a>è·å– SYSTEM_ALERT_WINDOW æƒé™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_CODE = <span class="number">1</span>;</div><div class="line"><span class="function"><span class="keyword">private</span>  <span class="keyword">void</span> <span class="title">requestAlertWindowPermission</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/** ä½¿ç”¨Action Settings.ACTION_MANAGE_OVERLAY_PERMISSIONå¯åŠ¨éšå¼Intent */</span></div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);</div><div class="line"></div><div class="line">    <span class="comment">/** ä½¿ç”¨"package:" + getPackageName()æºå¸¦Appçš„åŒ…åä¿¡æ¯ */</span></div><div class="line">    intent.setData(Uri.parse(<span class="string">"package:"</span> + getPackageName()));</div><div class="line"></div><div class="line">    startActivityForResult(intent, REQUEST_CODE);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</div><div class="line">    <span class="keyword">if</span> (requestCode == REQUEST_CODE) &#123;</div><div class="line">        </div><div class="line">        <span class="comment">/** ä½¿ç”¨Settings.canDrawOverlaysæ–¹æ³•åˆ¤æ–­æˆæƒç»“æœ*/</span></div><div class="line">        <span class="keyword">if</span> (Settings.canDrawOverlays(<span class="keyword">this</span>)) &#123;</div><div class="line">          Log.i(LOGTAG, <span class="string">"onActivityResult granted"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–-WRITE-SETTINGS-æƒé™"><a href="#è·å–-WRITE-SETTINGS-æƒé™" class="headerlink" title="è·å– WRITE_SETTINGS æƒé™"></a>è·å– WRITE_SETTINGS æƒé™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_CODE_WRITE_SETTINGS = <span class="number">2</span>;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestWriteSettings</span><span class="params">()</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="comment">/** ä½¿ç”¨Action Settings.ACTION_MANAGE_WRITE_SETTINGS å¯åŠ¨éšå¼Intent */</span></div><div class="line">    Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_MANAGE_WRITE_SETTINGS);</div><div class="line"></div><div class="line">    <span class="comment">/** ä½¿ç”¨"package:" + getPackageName()æºå¸¦Appçš„åŒ…åä¿¡æ¯ */</span></div><div class="line">    intent.setData(Uri.parse(<span class="string">"package:"</span> + getPackageName()));</div><div class="line"></div><div class="line"></div><div class="line">    startActivityForResult(intent, REQUEST_CODE_WRITE_SETTINGS );</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</div><div class="line">    <span class="keyword">if</span> (requestCode == REQUEST_CODE_WRITE_SETTINGS) &#123;</div><div class="line"></div><div class="line">        <span class="comment">/** ä½¿ç”¨Settings.System.canWriteæ–¹æ³•æ£€æµ‹æˆæƒç»“æœ */</span></div><div class="line">        <span class="keyword">if</span> (Settings.System.canWrite(<span class="keyword">this</span>)) &#123;</div><div class="line">            Log.i(LOGTAG, <span class="string">"onActivityResult write settings granted"</span> );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒé“¾æ¥</p>
</blockquote>
<p><a href="https://developer.android.com/training/permissions/requesting.html" target="_blank" rel="external">åœ¨è¿è¡Œæ—¶è¯·æ±‚æƒé™-å®˜ç½‘</a><br><a href="https://developer.android.com/guide/topics/permissions/normal-permissions.html?hl=zh-cn" target="_blank" rel="external">æ­£å¸¸æƒé™è¡¨-å®˜ç½‘</a><br><a href="https://developer.android.com/guide/topics/security/permissions.html?hl=zh-cn" target="_blank" rel="external">å±é™©æƒé™è¡¨-å®˜ç½‘</a><br><a href="http://droidyue.com/blog/2016/01/17/understanding-marshmallow-runtime-permission/" target="_blank" rel="external">èŠä¸€èŠAndroid 6.0çš„è¿è¡Œæ—¶æƒé™</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Android 6.0ï¼ˆAPI çº§åˆ« 23ï¼‰æƒé™è¶Šæ¥è¶Šè§„èŒƒï¼Œä¸åƒä»¥å¾€é‚£æ ·ç›´æ¥åœ¨AndroidManifest.xml ä¸­ä½¿ç”¨ uses-permission æ ‡ç­¾æ˜¯å£°æ˜ä½ æ‰€è¦çš„æƒé™å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ç°åœ¨çš„æƒé™åˆ†ä¸º æ­£å¸¸æƒé™åˆå±é™©æƒé™ã€ä»¥åŠç‰¹æ®Šæƒé™ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ­£å¸¸æƒé™ :æ­£å¸¸æƒé™æ¶µç›–åº”ç”¨éœ€è¦è®¿é—®å…¶æ²™ç›’å¤–éƒ¨æ•°æ®æˆ–èµ„æºï¼Œä½†å¯¹ç”¨æˆ·éšç§æˆ–å…¶ä»–åº”ç”¨æ“ä½œé£é™©å¾ˆå°çš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æ—¶åŒºçš„æƒé™å°±æ˜¯æ­£å¸¸æƒé™ã€‚å¦‚æœåº”ç”¨å£°æ˜å…¶éœ€è¦æ­£å¸¸æƒé™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘åº”ç”¨æˆäºˆè¯¥æƒé™ã€‚å¦‚éœ€å½“å‰æ­£å¸¸æƒé™çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…æ­£å¸¸æƒé™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å±é™©æƒé™ : æ¶µç›–åº”ç”¨éœ€è¦æ¶‰åŠç”¨æˆ·éšç§ä¿¡æ¯çš„æ•°æ®æˆ–èµ„æºï¼Œæˆ–è€…å¯èƒ½å¯¹ç”¨æˆ·å­˜å‚¨çš„æ•°æ®æˆ–å…¶ä»–åº”ç”¨çš„æ“ä½œäº§ç”Ÿå½±å“çš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œèƒ½å¤Ÿè¯»å–ç”¨æˆ·çš„è”ç³»äººå±äºå±é™©æƒé™ã€‚å¦‚æœåº”ç”¨å£°æ˜å…¶éœ€è¦å±é™©æƒé™ï¼Œåˆ™ç”¨æˆ·å¿…é¡»æ˜ç¡®å‘åº”ç”¨æˆäºˆè¯¥æƒé™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç‰¹æ®Šæƒé™ : ä¸€äº›ç‰¹åˆ«æ•æ„Ÿçš„æƒé™,ä¾‹å¦‚è®¾ç½®æ‚¬æµ®çª—&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.yefangqingchen.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://www.yefangqingchen.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>SwipeToLoadLayout ç”¨æ³•</title>
    <link href="http://www.yefangqingchen.com/2017/03/22/SwipeToLoadLayout%E7%94%A8%E6%B3%95/"/>
    <id>http://www.yefangqingchen.com/2017/03/22/SwipeToLoadLayoutç”¨æ³•/</id>
    <published>2017-03-22T08:10:00.000Z</published>
    <updated>2017-03-29T10:49:42.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>   è¿˜åœ¨ç”¨é‚£äº›è¢«åˆ«äººæ”¹æˆä¹±ä¸ƒå…«ç³Ÿï¼Œé—®é¢˜ç™¾å‡ºã€ä¸èƒ½å®šåˆ¶ã€éš¾ç”¨éš¾æ‡‚éš¾é€‚é…çš„ä¸Šä¸‹æ‹‰æ¡†æ¶å— ï¼Ÿ </p>
<p>   è™½ç„¶ç½‘ä¸Šå¾ˆå¤šå·²ç»æœ‰å¾ˆå¤šå†™å¥½äº†å¼€æºåˆ·æ–°æ§ä»¶ï¼Œä½†æ˜¯å®ç”¨æ€§å¤ªå·®äº†ï¼Œè‡ªå·±ç©ç©å¯ä»¥ï¼Œä½†æ˜¯åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­æƒ³ç”¨ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚ä½†æ˜¯ç°åœ¨æˆ‘è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ˆå…¬å¸é¡¹ç›®ï¼‰å°±æ˜¯ä½¿ç”¨çš„SwipeToLoadLayoutï¼Œç”¨äº†ä¹‹åè§‰å¾—çœŸçš„å¤ªå¥½ç”¨äº†ï¼Œå¤ªç®€å•äº†ã€‚ã€‚ã€‚</p>
<p>   SwipeToLoadLayouté¡¹ç›®ä¸­å·²ç»å®ç°äº†å‡ ä¸ªä¸»æµçš„åˆ·æ–°æ•ˆæœï¼ŒTwitter styleï¼ŒJD styleï¼Œgoogle styleï¼ŒYalantis styleï¼Œdemoä¹Ÿä¸‹è½½ä¸‹æ¥çœ‹äº†ï¼ŒçœŸä¸é”™ï¼Œè¿˜æ”¯æŒå„ç§è‡ªå®šä¹‰ï¼Œè‡ªå®šä¹‰å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œå¤´éƒ¨è¿˜åˆ†classicï¼Œaboveï¼Œblowï¼Œscaleå››ç§ç±»å‹ï¼Œè¿˜æœ‰è‡ªåŠ¨åˆ·æ–°çš„æ•ˆæœï¼Œä½“éªŒä¹Ÿå¾ˆæµç•…ã€‚</p>
<p>  æ”¯æŒå„ç§Viewå’ŒViewGroupï¼ˆListViewï¼ŒScrollViewï¼ŒRecyclerViewï¼ŒGridViewï¼ŒWebViewï¼ŒLinearlayoutï¼ŒRelativeLayoutï¼ŒFrameLayoutï¼ŒImageViewï¼ŒTextViewç­‰ï¼‰çš„åˆ·æ–°å’ŒåŠ è½½ï¼Œè¿˜æ”¯æŒè‡ªåŠ¨åˆ·æ–°ï¼Œæ‰‹åŠ¨åˆ·æ–°ï¼Œè‡ªåŠ¨åŠ è½½ï¼Œæ‰‹åŠ¨åŠ è½½ï¼Œç¦æ­¢åˆ·æ–°ï¼Œç¦æ­¢åŠ è½½ç­‰æ“ä½œï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>é¡¹ç›®åœ°å€ <a href="https://github.com/Aspsine/SwipeToLoadLayout" target="_blank" rel="external">https://github.com/Aspsine/SwipeToLoadLayout</a></p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="æ‰“å¼€åœ¨appçš„build-gradleä¸­é…ç½®"><a href="#æ‰“å¼€åœ¨appçš„build-gradleä¸­é…ç½®" class="headerlink" title="æ‰“å¼€åœ¨appçš„build.gradleä¸­é…ç½®"></a>æ‰“å¼€åœ¨appçš„build.gradleä¸­é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">repositories &#123;</div><div class="line">    maven &#123; url <span class="string">"https://jitpack.io"</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">	compile <span class="string">'com.github.Aspsine:SwipeToLoadLayout:1.0.4'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://omsqy2wls.bkt.clouddn.com/WechatIMG1.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2><blockquote>
<p>SwipeToLoadLayout ä½¿ç”¨ä¸Šä¸‹æ‹‰åˆ·æ–°éœ€è¦è‡ªå·±è‡ªå®šä¹‰ä¸Šä¸‹æ‹‰æ•ˆæœï¼Œå¾ˆç®€å•ï¼Œç®€å•åˆ°åªéœ€è¦å®šä¹‰ä¸ªTextViewã€‚</p>
</blockquote>
<ul>
<li><p>1ã€å®šä¹‰ä¸Šä¸‹æ‹‰åˆ·æ–° , ä¸Šä¸‹æ‹‰åˆ·å¯ä»¥å®šä¹‰ä¸ºä¸€æ ·çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RefreshHeadView</span> <span class="keyword">extends</span> <span class="title">TextView</span> <span class="keyword">implements</span> <span class="title">SwipeRefreshTrigger</span> , <span class="title">SwipeTrigger</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RefreshHeadView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RefreshHeadView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RefreshHeadView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRefresh</span><span class="params">()</span> </span>&#123;</div><div class="line">        setText(<span class="string">"æ­£åœ¨æ‹¼å‘½åŠ è½½æ•°æ®..."</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPrepare</span><span class="params">()</span> </span>&#123;</div><div class="line">        setText(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMove</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">boolean</span> isComplete, <span class="keyword">boolean</span> automatic)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!isComplete) &#123;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (y &gt; getHeight()) &#123;</div><div class="line">                setText(<span class="string">"é‡Šæ”¾åˆ·æ–°"</span>);</div><div class="line"></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y &lt; getHeight()) &#123;</div><div class="line"></div><div class="line">                setText(<span class="string">"æ»‘åŠ¨å³å¯åˆ·æ–°"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">            setText(<span class="string">"åˆ·æ–°è¿”å›"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRelease</span><span class="params">()</span> </span>&#123;</div><div class="line">        setText(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">        setText(<span class="string">"åˆ·æ–°æˆåŠŸ"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReset</span><span class="params">()</span> </span>&#123;</div><div class="line">        setText(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>2ã€å¸ƒå±€æ–‡ä»¶ä¸­</p>
</li>
</ul>
<blockquote>
<p>æ³¨æ„<br>SwipeToLoadLayout ä¸­å¸ƒå±€åŒ…è£¹çš„View idæ˜¯å›ºå®šçš„ï¼Œä¸èƒ½æ”¹ï¼Œå¦åˆ™ç”¨ä¸äº†<br>åˆ·æ–°å¤´éƒ¨View id = swipe_refresh_header;<br>åˆ·æ–°ç›®æ ‡View id = swipe_target;<br>åˆ·æ–°åº•éƒ¨View id = swipe_load_more_footer;</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"</div><div class="line">    android:layout_width="match_parent"</div><div class="line">    android:layout_height="match_parent"</div><div class="line">    android:orientation="vertical"&gt;</div><div class="line"></div><div class="line">    &lt;com.aspsine.swipetoloadlayout.SwipeToLoadLayout</div><div class="line">        android:id="@+id/swipeToLoadLayout"</div><div class="line">        android:layout_width="match_parent"</div><div class="line">        android:layout_height="match_parent"&gt;</div><div class="line"></div><div class="line">        &lt;rock.example.com.refresh.RefreshHeadView</div><div class="line">            android:id="@id/swipe_refresh_header"</div><div class="line">            android:layout_width="match_parent"</div><div class="line">            android:layout_height="100dp"</div><div class="line">            android:gravity="center" /&gt;</div><div class="line"></div><div class="line">        &lt;android.support.v7.widget.RecyclerView</div><div class="line">            android:id="@+id/swipe_target"</div><div class="line">            android:layout_width="match_parent"</div><div class="line">            android:layout_height="match_parent" /&gt;</div><div class="line"></div><div class="line"></div><div class="line">        &lt;rock.example.com.refresh.RefreshFooterView</div><div class="line">            android:id="@id/swipe_load_more_footer"</div><div class="line">            android:layout_width="match_parent"</div><div class="line">            android:layout_height="100dp"</div><div class="line">            android:gravity="center" /&gt;</div><div class="line">    &lt;/com.aspsine.swipetoloadlayout.SwipeToLoadLayout&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h2 id="è¿è¡Œæ•ˆæœ-ï¼ˆå¯ä»¥è‡ªå·±å®šä¹‰å¥½çœ‹ç‚¹çš„ï¼‰"><a href="#è¿è¡Œæ•ˆæœ-ï¼ˆå¯ä»¥è‡ªå·±å®šä¹‰å¥½çœ‹ç‚¹çš„ï¼‰" class="headerlink" title="è¿è¡Œæ•ˆæœ ï¼ˆå¯ä»¥è‡ªå·±å®šä¹‰å¥½çœ‹ç‚¹çš„ï¼‰"></a>è¿è¡Œæ•ˆæœ ï¼ˆå¯ä»¥è‡ªå·±å®šä¹‰å¥½çœ‹ç‚¹çš„ï¼‰</h2><p><img src="http://omsqy2wls.bkt.clouddn.com/2017-03-22%2016.15.07.gif" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<h2 id="SwipeToLoadLayoutå¸¸ç”¨å±æ€§"><a href="#SwipeToLoadLayoutå¸¸ç”¨å±æ€§" class="headerlink" title="SwipeToLoadLayoutå¸¸ç”¨å±æ€§"></a>SwipeToLoadLayoutå¸¸ç”¨å±æ€§</h2><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>app:refresh_enabled</td>
<td>è®¾ç½®æ˜¯å¦å¯ä»¥ä¸‹æ‹‰åˆ·æ–°</td>
</tr>
<tr>
<td>app:load_more_enabled</td>
<td>è®¾ç½®æ˜¯å¦å¯ä»¥ä¸Šæ‹‰åŠ è½½æ›´å¤š</td>
</tr>
<tr>
<td>app:swipe_style</td>
<td>è®¾ç½®ä¸‹æ‹‰åˆ·æ–°ä¸ä¸Šæ‹‰åŠ è½½çš„æ ·å¼ï¼Œå…¶å€¼ä¸ºclassicï¼Œaboveï¼Œblewæˆ–scale</td>
</tr>
<tr>
<td>app:refresh_trigger_offset</td>
<td>è§¦å‘ä¸‹æ‹‰åˆ·æ–°çš„åç§»é‡ï¼Œé»˜è®¤å€¼æ˜¯ä¸‹æ‹‰åˆ·æ–°å¤´éƒ¨çš„é«˜åº¦</td>
</tr>
<tr>
<td>app:refresh_final_drag_offset</td>
<td>ä¸‹æ‹‰åˆ·æ–°æœ€å¤§å¯ä»¥æ‹–åŠ¨çš„åç§»é‡</td>
</tr>
<tr>
<td>app:load_more_final_drag_offset</td>
<td>ä¸Šæ‹‰åŠ è½½æ›´å¤šæœ€å¤§å¯ä»¥æ‹–åŠ¨çš„åç§»é‡</td>
</tr>
<tr>
<td>app:release_to_refreshing_scrolling_duration</td>
<td>é‡Šæ”¾ä¸‹æ‹‰åˆ·æ–°æŒç»­æ»šåŠ¨çš„æ—¶é—´</td>
</tr>
<tr>
<td>app:release_to_loading_more_scrolling_duration</td>
<td>é‡Šæ”¾ä¸Šæ‹‰åŠ è½½æ›´å¤šæŒç»­æ»šåŠ¨çš„æ—¶é—´</td>
</tr>
<tr>
<td>app:refresh_complete_delay_duration</td>
<td>ä¸‹æ‹‰åˆ·æ–°å®Œæˆå»¶è¿Ÿçš„æŒç»­æ—¶é—´</td>
</tr>
<tr>
<td>app:load_more_complete_delay_duration</td>
<td>ä¸Šæ‹‰åŠ è½½æ›´å¤šå®Œæˆå»¶è¿Ÿçš„æŒç»­æ—¶é—´</td>
</tr>
<tr>
<td>app:refresh_complete_to_default_scrolling_duration</td>
<td>é»˜è®¤å®Œæˆä¸‹æ‹‰åˆ·æ–°æŒç»­æ»šåŠ¨æ—¶é—´</td>
</tr>
<tr>
<td>app:load_more_complete_to_default_scrolling_duration</td>
<td>é»˜è®¤å®Œæˆä¸Šæ‹‰åŠ è½½æ›´å¤šæŒç»­æ»šåŠ¨æ—¶é—´</td>
</tr>
<tr>
<td>app:default_to_refreshing_scrolling_duration</td>
<td>é»˜è®¤ä¸‹æ‹‰åˆ·æ–°æ»šåŠ¨æ—¶é—´</td>
</tr>
<tr>
<td>app:default_to_loading_more_scrolling_duration</td>
<td>é»˜è®¤ä¸Šæ‹‰åŠ è½½æ›´å¤šæ»šåŠ¨æ—¶é—´</td>
</tr>
</tbody>
</table>
<hr>
<blockquote>
<p>å‚è€ƒé“¾æ¥<br><a href="http://www.jianshu.com/p/d69ae409a52c" target="_blank" rel="external">http://www.jianshu.com/p/d69ae409a52c</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;   è¿˜åœ¨ç”¨é‚£äº›è¢«åˆ«äººæ”¹æˆä¹±ä¸ƒå…«ç³Ÿï¼Œé—®é¢˜ç™¾å‡ºã€ä¸èƒ½å®šåˆ¶ã€éš¾ç”¨éš¾æ‡‚éš¾é€‚é…çš„ä¸Šä¸‹æ‹‰æ¡†æ¶å— ï¼Ÿ &lt;/p&gt;
&lt;p&gt;   è™½ç„¶ç½‘ä¸Šå¾ˆå¤šå·²ç»æœ‰å¾ˆå¤šå†™å¥½äº†å¼€æºåˆ·æ–°æ§ä»¶ï¼Œä½†æ˜¯å®ç”¨æ€§å¤ªå·®äº†ï¼Œè‡ªå·±ç©ç©å¯ä»¥ï¼Œä½†æ˜¯åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­æƒ³ç”¨ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚ä½†æ˜¯ç°åœ¨æˆ‘è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ˆå…¬å¸é¡¹ç›®ï¼‰å°±æ˜¯ä½¿ç”¨çš„SwipeToLoadLayoutï¼Œç”¨äº†ä¹‹åè§‰å¾—çœŸçš„å¤ªå¥½ç”¨äº†ï¼Œå¤ªç®€å•äº†ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;   SwipeToLoadLayouté¡¹ç›®ä¸­å·²ç»å®ç°äº†å‡ ä¸ªä¸»æµçš„åˆ·æ–°æ•ˆæœï¼ŒTwitter styleï¼ŒJD styleï¼Œgoogle styleï¼ŒYalantis styleï¼Œdemoä¹Ÿä¸‹è½½ä¸‹æ¥çœ‹äº†ï¼ŒçœŸä¸é”™ï¼Œè¿˜æ”¯æŒå„ç§è‡ªå®šä¹‰ï¼Œè‡ªå®šä¹‰å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œå¤´éƒ¨è¿˜åˆ†classicï¼Œaboveï¼Œblowï¼Œscaleå››ç§ç±»å‹ï¼Œè¿˜æœ‰è‡ªåŠ¨åˆ·æ–°çš„æ•ˆæœï¼Œä½“éªŒä¹Ÿå¾ˆæµç•…ã€‚&lt;/p&gt;
&lt;p&gt;  æ”¯æŒå„ç§Viewå’ŒViewGroupï¼ˆListViewï¼ŒScrollViewï¼ŒRecyclerViewï¼ŒGridViewï¼ŒWebViewï¼ŒLinearlayoutï¼ŒRelativeLayoutï¼ŒFrameLayoutï¼ŒImageViewï¼ŒTextViewç­‰ï¼‰çš„åˆ·æ–°å’ŒåŠ è½½ï¼Œè¿˜æ”¯æŒè‡ªåŠ¨åˆ·æ–°ï¼Œæ‰‹åŠ¨åˆ·æ–°ï¼Œè‡ªåŠ¨åŠ è½½ï¼Œæ‰‹åŠ¨åŠ è½½ï¼Œç¦æ­¢åˆ·æ–°ï¼Œç¦æ­¢åŠ è½½ç­‰æ“ä½œï¼Œå®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ &lt;a href=&quot;https://github.com/Aspsine/SwipeToLoadLayout&quot;&gt;https://github.com/Aspsine/SwipeToLoadLayout&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.yefangqingchen.com/categories/Android/"/>
    
      <category term="å¼€æºæ§ä»¶" scheme="http://www.yefangqingchen.com/categories/Android/%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6/"/>
    
    
      <category term="Android" scheme="http://www.yefangqingchen.com/tags/Android/"/>
    
      <category term="å¼€æºæ§ä»¶" scheme="http://www.yefangqingchen.com/tags/%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>RxJava å­¦ä¹ ç¬”è®°</title>
    <link href="http://www.yefangqingchen.com/2017/03/20/RxJava-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://www.yefangqingchen.com/2017/03/20/RxJava-å­¦ä¹ ç¬”è®°/</id>
    <published>2017-03-20T09:58:05.000Z</published>
    <updated>2017-03-20T10:17:33.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¤§æ¦‚å°±æ˜¯è¯´RxJavaæ˜¯Java VMä¸Šä¸€ä¸ªçµæ´»çš„ã€ä½¿ç”¨å¯è§‚æµ‹åºåˆ—æ¥ç»„æˆçš„ä¸€ä¸ªå¼‚æ­¥çš„ã€åŸºäºäº‹ä»¶çš„åº“ã€‚<br>Observableså¯ä»¥å‘å‡ºä¸€ç³»åˆ—çš„ äº‹ä»¶ï¼Œè¿™é‡Œçš„äº‹ä»¶å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€å¤æ‚è®¡ç®—å¤„ç†ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶æ“ä½œç­‰ç­‰ï¼Œäº‹ä»¶æ‰§è¡Œç»“æŸåäº¤ç»™ Observer/Subscriber çš„å›è°ƒå¤„ç†ã€‚</p>
</blockquote>
<hr>
<h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><blockquote>
<p> View æ˜¯ è¢«è§‚å¯Ÿè€…ï¼ˆObservable/Subscriberï¼‰ï¼Œ OnClickListener æ˜¯ è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼ŒsetOnClickListener() æ˜¯ Subscribã€‚</p>
</blockquote>
<ul>
<li>Observer/Subscriber : äº‹ä»¶çš„æ¶ˆè´¹è€…</li>
<li>Observable : äº‹ä»¶çš„äº§ç”Ÿè€…</li>
<li>Subscrib : ç”¨äºå…³è”æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…</li>
</ul>
<p><img src="http://omsqy2wls.bkt.clouddn.com/WechatIMG2.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<ul>
<li>onNext() : Observableè°ƒç”¨è¿™ä¸ªæ–¹æ³•å‘é€æ•°æ®ï¼ŒObserverä¸­æ¥å—æ•°æ®</li>
<li>onCompleted() : åœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­å‡ºå¼‚å¸¸æ—¶è§¦å‘ï¼Œé˜Ÿåˆ—è‡ªåŠ¨ç»ˆæ­¢ä¸åœ¨æ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
<li>onError() : åœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­å‡ºå¼‚å¸¸æ—¶è§¦å‘ï¼Œé˜Ÿåˆ—è‡ªåŠ¨ç»ˆæ­¢ä¸åœ¨æ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
</ul>
<blockquote>
<p>æ³¨æ„:onCompleted()å’ŒonError()åœ¨é˜Ÿåˆ—ä¸­è°ƒç”¨äº†å…¶ä¸­ä¸€ä¸ªï¼Œå°±ä¸åº”è¯¥å†è°ƒç”¨å¦ä¸€ä¸ª</p>
</blockquote>
<a id="more"></a>
<h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/*******************è§‚å¯Ÿè€…***************************/</span></div><div class="line"></div><div class="line"><span class="comment">//è§‚å¯Ÿè€…1</span></div><div class="line">Observer&lt;String&gt; observer = <span class="keyword">new</span> Observer&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onComplete: "</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onError: "</span> + e.getMessage());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onNext: "</span> + s);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//è§‚å¯Ÿè€…2</span></div><div class="line">Subscriber&lt;String&gt; subscriber = <span class="keyword">new</span> Subscriber&lt;String&gt;() &#123;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</div><div class="line">         <span class="comment">//onStart(): è¿™æ˜¯ Subscriber å¢åŠ çš„æ–¹æ³•,è¿™æ˜¯ä¸€ä¸ªå¯é€‰æ–¹æ³•ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒçš„å®ç°ä¸ºç©º</span></div><div class="line">          <span class="comment">//å®ƒä¼šåœ¨ subscribe åˆšå¼€å§‹ï¼Œè€Œäº‹ä»¶è¿˜æœªå‘é€ä¹‹å‰è¢«è°ƒç”¨</span></div><div class="line">     &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onComplete: "</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onError: "</span> + e.getMessage());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"onNext: "</span> + s);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/*********************è¢«è§‚å¯Ÿè€…***********************/</span></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  å†™æ³•ä¸€</div><div class="line">     *      æ‰§è¡Œç»“æœï¼š</div><div class="line">     *          onNext: 1</div><div class="line">     *          onNext: 2</div><div class="line">     *          onNext: 3</div><div class="line">     *          onComplete:</div><div class="line">     */</div><div class="line">Observable&lt;String&gt; observable1 = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</div><div class="line">        subscriber.onNext(<span class="string">"1"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"2"</span>);</div><div class="line">        subscriber.onNext(<span class="string">"3"</span>);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">observable1.subscribe(observer);</div><div class="line"></div><div class="line"></div><div class="line">----------------------------------------------------------------</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  å†™æ³•äºŒ</div><div class="line">     *      æ‰§è¡Œç»“æœï¼š</div><div class="line">     *          onNext: 1</div><div class="line">     *          onNext: 2</div><div class="line">     *          onNext: 3</div><div class="line">     *          onComplete:</div><div class="line">     */</div><div class="line">Observable observable2 = Observable.just(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>);</div><div class="line">observable2.subscribe(observer);</div><div class="line"></div><div class="line">----------------------------------------------------------------</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  å†™æ³•ä¸‰</div><div class="line">     *      æ‰§è¡Œç»“æœï¼š</div><div class="line">     *          onNext: 1</div><div class="line">     *          onNext: 2</div><div class="line">     *          onNext: 3</div><div class="line">     *          onComplete:</div><div class="line">     */</div><div class="line">String[] words = &#123;<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>&#125;;</div><div class="line">Observable observable3 = Observable.from(words);</div><div class="line">observable3.subscribe(observer);</div><div class="line">----------------------------------------------------------------</div><div class="line"></div><div class="line">    <span class="comment">/********************************ç®€æ˜“å†™æ³•**************************************/</span></div><div class="line"></div><div class="line">Observable.just(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">    .subscribeOn(Schedulers.io()) <span class="comment">// æŒ‡å®š subscribe() å‘ç”Ÿåœ¨ IO çº¿ç¨‹</span></div><div class="line">    .observeOn(AndroidSchedulers.mainThread()) <span class="comment">// æŒ‡å®š Subscriber çš„å›è°ƒå‘ç”Ÿåœ¨ä¸»çº¿ç¨‹</span></div><div class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;Integer&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</div><div class="line">            System.out.println(<span class="string">"onNext: "</span> + integer);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**************æ‰“å°æ•°ç»„æˆ–Listé›†åˆ*******************/</span></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  æ‰§è¡Œç»“æœï¼š</div><div class="line">     *      onNext: 1</div><div class="line">     *      onNext: 2</div><div class="line">     *      onNext: 3</div><div class="line">     */</div><div class="line">Integer [] ints = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</div><div class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">list.add(<span class="number">1</span>);</div><div class="line">list.add(<span class="number">2</span>);</div><div class="line">list.add(<span class="number">3</span>);</div><div class="line"></div><div class="line">Observable.from(ints)</div><div class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;Integer&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer i)</span> </span>&#123;</div><div class="line">            System.out.println(<span class="string">"onNext: "</span> + i);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**************ä»æœ¬åœ°å–å›¾ç‰‡åœ¨æ˜¾ç¤º*******************/</span></div><div class="line">Observable.just(<span class="string">"images/logo.png"</span>) <span class="comment">// è¾“å…¥ç±»å‹ String</span></div><div class="line">    .map(<span class="keyword">new</span> Func1&lt;String, Bitmap&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Bitmap <span class="title">call</span><span class="params">(String filePath)</span> </span>&#123; <span class="comment">// å‚æ•°ç±»å‹ String</span></div><div class="line">            <span class="keyword">return</span> getBitmapFromPath(filePath); <span class="comment">// è¿”å›ç±»å‹ Bitmap</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;Bitmap&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Bitmap bitmap)</span> </span>&#123; <span class="comment">// å‚æ•°ç±»å‹ Bitmap</span></div><div class="line">            showBitmap(bitmap);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="çº¿ç¨‹æ§åˆ¶"><a href="#çº¿ç¨‹æ§åˆ¶" class="headerlink" title="çº¿ç¨‹æ§åˆ¶"></a>çº¿ç¨‹æ§åˆ¶</h3><ul>
<li>subscribeOn(): æŒ‡å®š subscribe() æ‰€å‘ç”Ÿçš„çº¿ç¨‹</li>
<li>observeOn(): æŒ‡å®š Subscriber æ‰€è¿è¡Œåœ¨çš„çº¿ç¨‹</li>
</ul>
<ul>
<li>Schedulers.immediate() : ç›´æ¥åœ¨å½“å‰çº¿ç¨‹è¿è¡Œï¼Œé»˜è®¤çš„</li>
<li>Schedulers.newThread() : æ€»æ˜¯å¯ç”¨æ–°çº¿ç¨‹ï¼Œå¹¶åœ¨æ–°çº¿ç¨‹æ‰§è¡Œæ“ä½œ</li>
<li>Schedulers.io() : I/O æ“ä½œï¼ˆè¯»å†™æ–‡ä»¶ã€è¯»å†™æ•°æ®åº“ã€ç½‘ç»œä¿¡æ¯äº¤äº’ç­‰ï¼‰ï¼Œæ— æ•°é‡ä¸Šé™ï¼Œå¯é‡ç”¨ç©ºé—²çº¿ç¨‹</li>
<li>AndroidSchedulers.mainThread() : åœ¨ Android ä¸»çº¿ç¨‹è¿è¡Œ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**************ä»æœ¬åœ°å–å›¾ç‰‡åœ¨æ˜¾ç¤º*******************/</span></div><div class="line">Observable.create(<span class="keyword">new</span> OnSubscribe&lt;Drawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Drawable&gt; subscriber)</span> </span>&#123;</div><div class="line">        Drawable drawable = getTheme().getDrawable(drawableRes));</div><div class="line">        subscriber.onNext(drawable);</div><div class="line">        subscriber.onCompleted();</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">.subscribeOn(Schedulers.io()) <span class="comment">// æŒ‡å®š subscribe() å‘ç”Ÿåœ¨ IO çº¿ç¨‹</span></div><div class="line">.observeOn(AndroidSchedulers.mainThread()) <span class="comment">// æŒ‡å®š Subscriber çš„å›è°ƒå‘ç”Ÿåœ¨ä¸»çº¿ç¨‹</span></div><div class="line">.subscribe(<span class="keyword">new</span> Observer&lt;Drawable&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">        imageView.setImageDrawable(drawable);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>å‚è€ƒé“¾æ¥</p>
</blockquote>
<p><a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="external">http://gank.io/post/560e15be2dca930e00da1083</a><br><a href="http://blog.csdn.net/yyh352091626/article/details/53304728" target="_blank" rel="external">http://blog.csdn.net/yyh352091626/article/details/53304728</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¤§æ¦‚å°±æ˜¯è¯´RxJavaæ˜¯Java VMä¸Šä¸€ä¸ªçµæ´»çš„ã€ä½¿ç”¨å¯è§‚æµ‹åºåˆ—æ¥ç»„æˆçš„ä¸€ä¸ªå¼‚æ­¥çš„ã€åŸºäºäº‹ä»¶çš„åº“ã€‚&lt;br&gt;Observableså¯ä»¥å‘å‡ºä¸€ç³»åˆ—çš„ äº‹ä»¶ï¼Œè¿™é‡Œçš„äº‹ä»¶å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€å¤æ‚è®¡ç®—å¤„ç†ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶æ“ä½œç­‰ç­‰ï¼Œäº‹ä»¶æ‰§è¡Œç»“æŸåäº¤ç»™ Observer/Subscriber çš„å›è°ƒå¤„ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt; View æ˜¯ è¢«è§‚å¯Ÿè€…ï¼ˆObservable/Subscriberï¼‰ï¼Œ OnClickListener æ˜¯ è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼ŒsetOnClickListener() æ˜¯ Subscribã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Observer/Subscriber : äº‹ä»¶çš„æ¶ˆè´¹è€…&lt;/li&gt;
&lt;li&gt;Observable : äº‹ä»¶çš„äº§ç”Ÿè€…&lt;/li&gt;
&lt;li&gt;Subscrib : ç”¨äºå…³è”æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://omsqy2wls.bkt.clouddn.com/WechatIMG2.jpeg&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;onNext() : Observableè°ƒç”¨è¿™ä¸ªæ–¹æ³•å‘é€æ•°æ®ï¼ŒObserverä¸­æ¥å—æ•°æ®&lt;/li&gt;
&lt;li&gt;onCompleted() : åœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­å‡ºå¼‚å¸¸æ—¶è§¦å‘ï¼Œé˜Ÿåˆ—è‡ªåŠ¨ç»ˆæ­¢ä¸åœ¨æ‰§è¡Œå…¶ä»–æ–¹æ³•&lt;/li&gt;
&lt;li&gt;onError() : åœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­å‡ºå¼‚å¸¸æ—¶è§¦å‘ï¼Œé˜Ÿåˆ—è‡ªåŠ¨ç»ˆæ­¢ä¸åœ¨æ‰§è¡Œå…¶ä»–æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„:onCompleted()å’ŒonError()åœ¨é˜Ÿåˆ—ä¸­è°ƒç”¨äº†å…¶ä¸­ä¸€ä¸ªï¼Œå°±ä¸åº”è¯¥å†è°ƒç”¨å¦ä¸€ä¸ª&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.yefangqingchen.com/categories/Android/"/>
    
      <category term="RxJava" scheme="http://www.yefangqingchen.com/categories/Android/RxJava/"/>
    
    
      <category term="Android" scheme="http://www.yefangqingchen.com/tags/Android/"/>
    
      <category term="RxJava" scheme="http://www.yefangqingchen.com/tags/RxJava/"/>
    
  </entry>
  
  <entry>
    <title>Android é…ç½®ä»¥åŠä½¿ç”¨ Protobuf</title>
    <link href="http://www.yefangqingchen.com/2017/03/14/Android%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8Protobuf/"/>
    <id>http://www.yefangqingchen.com/2017/03/14/Androidé…ç½®ä»¥åŠä½¿ç”¨Protobuf/</id>
    <published>2017-03-14T10:32:31.000Z</published>
    <updated>2017-03-14T10:42:50.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å› ä¸ºæœ€è¿‘å…¬å¸è¦æ±‚åœ¨æ–°çš„APPç‰ˆæœ¬ä¸Šå’Œåå°é€šä¿¡ä½¿ç”¨protobufï¼Œå› ä¸ºæˆ‘ä¹‹å‰ä¹Ÿæ²¡æœ‰å¬è¯´è¿‡è¿™æ˜¯å•¥ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¹Ÿè®°å½•ä¸€ä¸‹ä½¿ç”¨çš„è¿‡ç¨‹ã€‚<br>è‡³äºProtobufæ˜¯ä»€ä¹ˆæœ‰ä»€ä¹ˆä¼˜ç‚¹ç¼ºç‚¹å°±ä¸å†™äº†ï¼Œgoogleä¸€ä¸‹ä¸€å¤§å †ã€‚è¿™é‡Œè®°ä¸€ä¸‹ç¬”è®°ã€‚</p>
</blockquote>
<h2 id="Protobuf-é…ç½®"><a href="#Protobuf-é…ç½®" class="headerlink" title="Protobuf é…ç½®"></a>Protobuf é…ç½®</h2><blockquote>
<p>ç°åœ¨Androidå¼€å‘åŸºæœ¬éƒ½æ˜¯ç”¨ Android Studio å¼€å§‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨Android Studioé‡Œé¢é…ç½®ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-æ‰“å¼€projectçš„build-gradleæ–‡ä»¶"><a href="#1-æ‰“å¼€projectçš„build-gradleæ–‡ä»¶" class="headerlink" title="1. æ‰“å¼€projectçš„build.gradleæ–‡ä»¶"></a>1. æ‰“å¼€projectçš„build.gradleæ–‡ä»¶</h2><p><img src="http://omsqy2wls.bkt.clouddn.com/blog_protobuf_1.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<blockquote>
<p>æ·»åŠ ä»£ç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    repositories &#123;</div><div class="line">        jcenter()</div><div class="line">        mavenCentral()<span class="comment">//æ·»åŠ æ­¤è¡Œ</span></div><div class="line">    &#125;</div><div class="line">    dependencies &#123;</div><div class="line">        classpath <span class="string">'com.android.tools.build:gradle:2.2.3'</span></div><div class="line">        classpath <span class="string">'com.google.protobuf:protobuf-gradle-plugin:0.8.0'</span><span class="comment">//æ·»åŠ æ­¤è¡Œ</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">allprojects &#123;</div><div class="line">    repositories &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-æ‰“å¼€åœ¨appçš„build-gradleä¸­é…ç½®"><a href="#2-æ‰“å¼€åœ¨appçš„build-gradleä¸­é…ç½®" class="headerlink" title="2. æ‰“å¼€åœ¨appçš„build.gradleä¸­é…ç½®"></a>2. æ‰“å¼€åœ¨appçš„build.gradleä¸­é…ç½®</h2><p><img src="http://omsqy2wls.bkt.clouddn.com/WechatIMG5.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<blockquote>
<p>æ·»åŠ ä»£ç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line">apply plugin: <span class="string">'com.google.protobuf'</span><span class="comment">//æ·»åŠ æ­¤è¡Œ</span></div><div class="line"></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">25</span></div><div class="line">    buildToolsVersion <span class="string">"25.0.2"</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"rock.example.com"</span></div><div class="line">        minSdkVersion <span class="number">15</span></div><div class="line">        targetSdkVersion <span class="number">25</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    dataBinding &#123;</div><div class="line">        enabled = <span class="keyword">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//æ·»åŠ æ­¤æ®µ</span></div><div class="line">protobuf &#123;</div><div class="line">    <span class="comment">//é…ç½®protocç¼–è¯‘å™¨</span></div><div class="line">    protoc &#123;</div><div class="line">        artifact = <span class="string">'com.google.protobuf:protoc:3.0.0-alpha-3'</span></div><div class="line">    &#125;</div><div class="line">    plugins &#123;</div><div class="line">        javalite &#123;</div><div class="line">            artifact = <span class="string">'com.google.protobuf:protoc-gen-javalite:3.0.0'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//è¿™é‡Œé…ç½®ç”Ÿæˆç›®å½•ï¼Œç¼–è¯‘åä¼šåœ¨buildçš„ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„javaæ–‡ä»¶</span></div><div class="line">    generateProtoTasks &#123;</div><div class="line">        all().each &#123; task -&gt;</div><div class="line">            task.plugins &#123;</div><div class="line">                javalite &#123;&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>,</span></span></div><div class="line">            include: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="title">androidTestCompile</span><span class="params">(<span class="string">'com.android.support.test.espresso:espresso-core:2.2.2'</span>, &#123;</span></div><div class="line">        exclude group: <span class="string">'com.android.support'</span>, <span class="keyword">module</span>: <span class="string">'support-annotations'</span></div><div class="line">    &#125;)</div><div class="line">    compile 'com.android.support:appcompat-v7:25.2.0'</div><div class="line">    compile 'com.android.support:design:25.2.0'</div><div class="line">    testCompile 'junit:junit:4.12'</div><div class="line">    compile 'com.google.protobuf:protobuf-lite:3.0.0'<span class="comment">//æ·»åŠ æ­¤è¡Œ</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-app-mainç›®å½•ä¸‹åˆ›å»ºprotoç›®å½•ï¼Œå­˜æ”¾-protoæ–‡ä»¶"><a href="#3-app-mainç›®å½•ä¸‹åˆ›å»ºprotoç›®å½•ï¼Œå­˜æ”¾-protoæ–‡ä»¶" class="headerlink" title="3. app/mainç›®å½•ä¸‹åˆ›å»ºprotoç›®å½•ï¼Œå­˜æ”¾.protoæ–‡ä»¶"></a>3. app/mainç›®å½•ä¸‹åˆ›å»ºprotoç›®å½•ï¼Œå­˜æ”¾.protoæ–‡ä»¶</h2><p><img src="http://omsqy2wls.bkt.clouddn.com/WechatIMG6.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<blockquote>
<p>åˆ›å»º.protoæ–‡ä»¶</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//protoçš„ç‰ˆæœ¬</span></div><div class="line">syntax = <span class="string">"proto3"</span>;</div><div class="line"></div><div class="line"><span class="comment">//å¦‚æœè®¾ç½®ç”Ÿæˆçš„Javaæ–‡ä»¶ä¹Ÿå°†ä¼šè‡ªåŠ¨å­˜æ”¾åˆ°æŒ‡å®šè¾“å‡ºç›®å½•ä¸‹çš„rock.example.com.modelç›®å½•ä¸­ã€‚</span></div><div class="line"><span class="comment">//å¦‚æœæ²¡æœ‰è®¾ç½®ï¼ŒJavaçš„åŒ…ååˆ™ä¸ºpackageå…³é”®å­—æŒ‡å®šçš„åç§°</span></div><div class="line">option java_package = <span class="string">"rock.example.com.model"</span>;</div><div class="line"><span class="comment">//å¦‚æœè®¾ç½®ç”Ÿæˆçš„javaæ–‡ä»¶åä¸ºUserProtoï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®é»˜è®¤åä¸º.protoæ–‡ä»¶å</span></div><div class="line">option java_outer_classname = <span class="string">"UserProto"</span>;</div><div class="line"></div><div class="line">message UserData&#123;</div><div class="line">	int64 id = <span class="number">1</span>;</div><div class="line">	string name = <span class="number">2</span>;</div><div class="line">	string msg = <span class="number">3</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-ç”Ÿæˆå¯¹åº”æ–‡ä»¶"><a href="#4-ç”Ÿæˆå¯¹åº”æ–‡ä»¶" class="headerlink" title="4. ç”Ÿæˆå¯¹åº”æ–‡ä»¶"></a>4. ç”Ÿæˆå¯¹åº”æ–‡ä»¶</h2><ol>
<li>Build - &gt; Clean Project</li>
<li>Build - &gt; Rebulid Project</li>
</ol>
<blockquote>
<p> æ„å»ºå®Œäº†ä¹‹åå¯ä»¥åœ¨å·¥ç¨‹çš„ app/build/generated/source/proto/debug/javalite/ä¸­æ‰¾åˆ°UserProto</p>
</blockquote>
<p><img src="http://omsqy2wls.bkt.clouddn.com/blog_protobuf_4.jpeg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<h2 id="5-è¯·æ±‚ç½‘ç»œå¡«å……UserProtoå¹¶ä½¿ç”¨"><a href="#5-è¯·æ±‚ç½‘ç»œå¡«å……UserProtoå¹¶ä½¿ç”¨" class="headerlink" title="5. è¯·æ±‚ç½‘ç»œå¡«å……UserProtoå¹¶ä½¿ç”¨"></a>5. è¯·æ±‚ç½‘ç»œå¡«å……UserProtoå¹¶ä½¿ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">liteHttp.execute(<span class="keyword">new</span> ByteString(url).setHttpListener(<span class="keyword">new</span> HttpListener&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(ByteString data, Response&lt;ByteString&gt; response)</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">        UserProto.UserData userProto = UserProto.UserData.parseFrom(data);</div><div class="line"></div><div class="line">        System.out.println(userProto.getName());</div><div class="line">        System.out.println(userProto.getMsg());</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">));</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>å‚è€ƒé“¾æ¥</p>
</blockquote>
<p><a href="https://taozj.org/201609/learn-note-of-protobuf.html" target="_blank" rel="external">https://taozj.org/201609/learn-note-of-protobuf.html</a><br><a href="https://github.com/google/protobuf" target="_blank" rel="external">https://github.com/google/protobuf</a><br><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/" target="_blank" rel="external">https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/</a></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å› ä¸ºæœ€è¿‘å…¬å¸è¦æ±‚åœ¨æ–°çš„APPç‰ˆæœ¬ä¸Šå’Œåå°é€šä¿¡ä½¿ç”¨protobufï¼Œå› ä¸ºæˆ‘ä¹‹å‰ä¹Ÿæ²¡æœ‰å¬è¯´è¿‡è¿™æ˜¯å•¥ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¹Ÿè®°å½•ä¸€ä¸‹ä½¿ç”¨çš„è¿‡ç¨‹ã€‚&lt;br&gt;è‡³äºProtobufæ˜¯ä»€ä¹ˆæœ‰ä»€ä¹ˆä¼˜ç‚¹ç¼ºç‚¹å°±ä¸å†™äº†ï¼Œgoogleä¸€ä¸‹ä¸€å¤§å †ã€‚è¿™é‡Œè®°ä¸€ä¸‹ç¬”è®°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Protobuf-é…ç½®&quot;&gt;&lt;a href=&quot;#Protobuf-é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;Protobuf é…ç½®&quot;&gt;&lt;/a&gt;Protobuf é…ç½®&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ç°åœ¨Androidå¼€å‘åŸºæœ¬éƒ½æ˜¯ç”¨ Android Studio å¼€å§‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨Android Studioé‡Œé¢é…ç½®ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.yefangqingchen.com/categories/Android/"/>
    
      <category term="Android Studio" scheme="http://www.yefangqingchen.com/categories/Android/Android-Studio/"/>
    
      <category term="Protobuf" scheme="http://www.yefangqingchen.com/categories/Android/Android-Studio/Protobuf/"/>
    
    
      <category term="Android" scheme="http://www.yefangqingchen.com/tags/Android/"/>
    
      <category term="Android Studio" scheme="http://www.yefangqingchen.com/tags/Android-Studio/"/>
    
      <category term="Protobuf" scheme="http://www.yefangqingchen.com/tags/Protobuf/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆç°åœ¨æ‰é€‰æ‹©å†™åšå®¢</title>
    <link href="http://www.yefangqingchen.com/2017/03/08/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%8E%B0%E5%9C%A8%E6%89%8D%E9%80%89%E6%8B%A9%E5%86%99%E5%8D%9A%E5%AE%A2/"/>
    <id>http://www.yefangqingchen.com/2017/03/08/ä¸ºä»€ä¹ˆç°åœ¨æ‰é€‰æ‹©å†™åšå®¢/</id>
    <published>2017-03-08T08:24:13.000Z</published>
    <updated>2017-03-08T10:07:32.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p>è¿½éšå‰è¾ˆä»¬çš„è„šæ­¥ï¼Œå·¥ä½œå‡ å¹´çš„æˆ‘ä¹Ÿå¼€å§‹å†³å®šå†™åšå®¢ã€‚å¾ˆæ—©å°±èŒå‘äº†è¦è‡ªå·±æ­å»ºç«™ç‚¹å†™åšå®¢çš„æƒ³æ³•ï¼Œè®°å½•ä¸‹ç”Ÿæ´»ã€æ€»ç»“ä¸‹æŠ€æœ¯éš¾ç‚¹ç­‰ç­‰ï¼Œä½†æ˜¯å› ä¸ºè‡ªå·±çš„æ‹–å»¶ç—‡ã€æ€•éº»çƒ¦å°±æ‹–åˆ°äº†ç°åœ¨ã€‚è¿˜æœ‰å°±æ˜¯å› ä¸ºè‡ªå·±è§‰å¾—è‡ªå·±ä¸€ç›´æ²¡æœ‰ä»å§‹åˆ°ç»ˆéƒ½æ˜¯è‡ªå·±å†™çš„å¼€æºé¡¹ç›®ã€æˆ–è€…æ§ä»¶å·¥å…·ä¹‹ç±»çš„ã€‚ä¸æƒ³æŠŠåˆ«äººçš„ä¸œè¥¿å¤åˆ¶è¿‡æ¥æ”¹æ”¹ï¼Œç„¶ååœ¨ä¸Šä¼ åˆ°è‡ªå·±çš„githubã€‚æˆ‘è§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆæ„æ€ã€‚</p>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆç°åœ¨åˆå†³å®šå¼€å§‹å†™å‘¢ ï¼Ÿ </p>
<a id="more"></a>
<p>å› ä¸ºå·¥ä½œå‡ å¹´åå¼€å§‹å‘ç°è‡ªå·±çš„æŠ€æœ¯å¢é•¿çš„å¤ªæ…¢ï¼Œå‘ç°é‡åˆ°äº†ç“¶é¢ˆï¼Œä»¿ä½›åˆå›åˆ°äº†å‡ å¹´å‰çš„çŠ¶æ€å˜å¾—è¿·èŒ«ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠã€‚</p>
<p>ä½œä¸ºä»äº‹ITè¡Œä¸šçš„æˆ‘æ¥è¯´ï¼Œç”Ÿæ´»åœ¨è¿™ä¸ªèŠ‚å¥å¿«ã€äººå¿ƒæµ®èºã€çŸ¥è¯†æ—¥æœˆæ›´æ–°çš„åŸå¸‚å’Œæ—¶ä»£åªæœ‰æ¯å¤©è®©è‡ªå·±å¿™ç¢Œå’Œè¿›æ­¥æ‰èƒ½è®©è‡ªå·±æ„Ÿåˆ°ä¸å¿ƒæ…Œã€ä¸è¢«æ·˜æ±°ã€‚æ‰€ä»¥ç°åœ¨æˆ‘æ‰å†³å®šè¦å¼€å§‹å†™åšå®¢ã€‚</p>
<p>ç°åœ¨æ‰“ç®—é‡æ–°æŠŠåŸºç¡€ä¹¦ç±å¤ä¹ ä¸€æ¬¡ï¼ŒæŠŠä»¥å¾€å’Œç°åœ¨å†å·¥ä½œä¸­å­¦åˆ°çš„çŸ¥è¯†ã€éš¾ç‚¹è®°å½•èµ·æ¥ã€‚ç„¶ååœ¨è‡ªå·±æ…¢æ…¢åšä¸€ä¸ªå¼€æºçš„é¡¹ç›®ã€‚</p>
<p>å¹¶ä¸”å†™åšå®¢ç¡®å®æœ‰å¾ˆå¤šå¥½å¤„ï¼š</p>
<blockquote>
<ul>
<li>æ•´ç†çŸ¥è¯†ï¼Œå­¦ä¹ ç¬”è®°</li>
<li>è®©è‡ªå·±å˜å¾—æ›´åŠ è‡ªä¿¡ï¼Œè®©è‡ªå·±å˜çš„å†·é™ä¸‹æ¥</li>
<li>å‘å¸ƒæ—¥è®°ï¼Œæ‚æ–‡ï¼Œå‘ˆç°æ‰€æƒ³ï¼Œå°†å…¶æš´éœ²åœ¨å¤–ï¼Œè¿™èƒ½è®©é”™è¯¯å’Œæ­£ç¡®éƒ½æ›´åŠ æ˜æ˜¾ï¼Œä»¥ä¾¿æ”¹æ­£å’Œå·©å›ºï¼Œå¸®åŠ©è‡ªå·±å¾ˆå¥½çš„è®¤è¯†è‡ªå·±ã€‚</li>
</ul>
</blockquote>
<p>æ„Ÿæƒ³</p>
<blockquote>
<ul>
<li>çŸ¥é“çš„è¶Šå¤šæ‡‚å¾—è¶Šå¤šï¼Œè¶Šæ˜¯èƒ½èƒ½å‘ç°è‡ªå·±æœ‰å¤šä¹ˆæ¸ºå°å’Œæ— çŸ¥ã€‚å¤šå»å¬å¬åˆ«äººçš„å£°éŸ³ï¼Œå¯ä»¥çŸ¥é“äººå¤–æœ‰äººï¼Œå±±å¤–æœ‰å±±ï¼Œä¹Ÿèƒ½è¡¡é‡è‡ªå·±çš„å®åŠ›ã€‚ä¸å¦„è‡ªè²è–„ï¼Œä¹Ÿä¸éª„å‚²è‡ªæ»¡ã€‚ä¿æŒå­¦ä¹ ï¼ŒåŠªåŠ›ï¼ŒåšæŒã€‚</li>
</ul>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;è¿½éšå‰è¾ˆä»¬çš„è„šæ­¥ï¼Œå·¥ä½œå‡ å¹´çš„æˆ‘ä¹Ÿå¼€å§‹å†³å®šå†™åšå®¢ã€‚å¾ˆæ—©å°±èŒå‘äº†è¦è‡ªå·±æ­å»ºç«™ç‚¹å†™åšå®¢çš„æƒ³æ³•ï¼Œè®°å½•ä¸‹ç”Ÿæ´»ã€æ€»ç»“ä¸‹æŠ€æœ¯éš¾ç‚¹ç­‰ç­‰ï¼Œä½†æ˜¯å› ä¸ºè‡ªå·±çš„æ‹–å»¶ç—‡ã€æ€•éº»çƒ¦å°±æ‹–åˆ°äº†ç°åœ¨ã€‚è¿˜æœ‰å°±æ˜¯å› ä¸ºè‡ªå·±è§‰å¾—è‡ªå·±ä¸€ç›´æ²¡æœ‰ä»å§‹åˆ°ç»ˆéƒ½æ˜¯è‡ªå·±å†™çš„å¼€æºé¡¹ç›®ã€æˆ–è€…æ§ä»¶å·¥å…·ä¹‹ç±»çš„ã€‚ä¸æƒ³æŠŠåˆ«äººçš„ä¸œè¥¿å¤åˆ¶è¿‡æ¥æ”¹æ”¹ï¼Œç„¶ååœ¨ä¸Šä¼ åˆ°è‡ªå·±çš„githubã€‚æˆ‘è§‰å¾—è¿™æ ·æ²¡ä»€ä¹ˆæ„æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä¸ºä»€ä¹ˆç°åœ¨åˆå†³å®šå¼€å§‹å†™å‘¢ ï¼Ÿ &lt;/p&gt;
    
    </summary>
    
      <category term="å¿ƒæƒ…æ‚è®°" scheme="http://www.yefangqingchen.com/categories/%E5%BF%83%E6%83%85%E6%9D%82%E8%AE%B0/"/>
    
      <category term="å…¶ä»–" scheme="http://www.yefangqingchen.com/categories/%E5%BF%83%E6%83%85%E6%9D%82%E8%AE%B0/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="å…¶ä»–" scheme="http://www.yefangqingchen.com/tags/%E5%85%B6%E4%BB%96/"/>
    
      <category term="å¿ƒæƒ…æ‚è®°" scheme="http://www.yefangqingchen.com/tags/%E5%BF%83%E6%83%85%E6%9D%82%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.yefangqingchen.com/2017/03/07/hello-world/"/>
    <id>http://www.yefangqingchen.com/2017/03/07/hello-world/</id>
    <published>2017-03-07T01:52:38.000Z</published>
    <updated>2017-03-08T10:07:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="å…¶ä»–" scheme="http://www.yefangqingchen.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
      <category term="å…¶ä»–" scheme="http://www.yefangqingchen.com/tags/%E5%85%B6%E4%BB%96/"/>
    
  </entry>
  
</feed>
